<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - AlumConnect</title>
    <style>
        /* ====== Reset & Body ====== */
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; display:flex; align-items:center; justify-content:center;
            padding:20px; animation: gradientShift 8s ease-in-out infinite;
        }
        @keyframes gradientShift {
            0%,100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
            50% { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        }

        /* ====== Reset Container ====== */
        .reset-container {
            background:white; border-radius:20px; padding:3rem; max-width:500px; width:100%;
            position:relative; overflow:hidden; animation: slideUp 0.8s ease-out, glow 2s ease-in-out infinite alternate;
            backdrop-filter:blur(10px); border:1px solid rgba(255,255,255,0.2); box-shadow:0 20px 40px rgba(0,0,0,0.15);
        }
        @keyframes slideUp { from {opacity:0; transform:translateY(50px);} to {opacity:1; transform:translateY(0);} }
        @keyframes glow { from {box-shadow:0 20px 40px rgba(0,0,0,0.15);} to {box-shadow:0 25px 50px rgba(102,126,234,0.2);} }

        .reset-container::before {
            content:''; position:absolute; top:0; left:0; right:0; height:5px;
            background:linear-gradient(90deg, #667eea, #764ba2, #f093fb, #f5576c);
            animation: colorWave 3s ease-in-out infinite;
        }
        @keyframes colorWave { 0%,100% { background:linear-gradient(90deg,#667eea,#764ba2,#f093fb,#f5576c);} 50% {background:linear-gradient(90deg,#f5576c,#f093fb,#764ba2,#667eea);} }

        /* ====== Icon & Titles ====== */
        .icon-container { display:flex; justify-content:center; margin-bottom:1.5rem; animation:bounceIn 1s ease-out 0.3s both; }
        @keyframes bounceIn { 0% {opacity:0; transform:scale(0.3);} 50% {opacity:1; transform:scale(1.1);} 100% {opacity:1; transform:scale(1);} }
        .reset-icon {
            width:80px; height:80px; background:linear-gradient(135deg,#667eea,#764ba2);
            border-radius:50%; display:flex; align-items:center; justify-content:center;
            color:white; font-size:2rem; box-shadow:0 8px 16px rgba(102,126,234,0.3);
            animation:pulse 2s ease-in-out infinite; position:relative; overflow:hidden;
        }
        @keyframes pulse { 0%,100%{transform:scale(1);} 50%{transform:scale(1.05);} }
        .reset-icon::before {
            content:''; position:absolute; top:0; left:-100%; width:100%; height:100%;
            background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
            animation: shimmer 2s ease-in-out infinite;
        }
        @keyframes shimmer { 0%{left:-100%;} 100%{left:100%;} }

        .reset-title { color:#2c3e50; font-size:2rem; font-weight:600; text-align:center; margin-bottom:1rem; animation: fadeInDown 0.8s ease-out 0.2s both; }
        @keyframes fadeInDown { from{opacity:0; transform:translateY(-20px);} to{opacity:1; transform:translateY(0);} }
        .reset-subtitle { color:#6c757d; text-align:center; margin-bottom:2.5rem; font-size:1rem; line-height:1.5; animation: fadeInUp 0.8s ease-out 0.4s both; }
        @keyframes fadeInUp { from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }

        /* ====== Form ====== */
        .form-group { margin-bottom:1.5rem; animation: slideInLeft 0.6s ease-out both; }
        .form-group:nth-child(2){animation-delay:0.5s;}
        .form-group:nth-child(3){animation-delay:0.6s;}
        @keyframes slideInLeft { from{opacity:0; transform:translateX(-30px);} to{opacity:1; transform:translateX(0);} }

        .password-input-wrapper{position:relative;}
        .form-input{
            width:100%; padding:1rem 3rem 1rem 1.2rem; border:2px solid #e9ecef;
            border-radius:12px; font-size:1rem; transition:all 0.3s ease; background:#f8f9fa; position:relative;
        }
        .form-input:focus{outline:none; border-color:#667eea; background:white; box-shadow:0 0 0 3px rgba(102,126,234,0.1); transform:translateY(-2px);}
        .form-input::placeholder{color:#adb5bd; transition:all 0.3s ease;}
        .form-input:focus::placeholder{opacity:0.7; transform:translateX(5px);}

        .password-toggle{position:absolute; right:12px; top:50%; transform:translateY(-50%); background:none; border:none; color:#6c757d; cursor:pointer; padding:5px; font-size:1.1rem; transition:all 0.3s ease;}
        .password-toggle:hover{ color:#667eea; transform:translateY(-50%) scale(1.1); }

        .submit-btn{
            width:100%; padding:1rem; background:linear-gradient(135deg,#667eea,#764ba2); color:white; border:none; border-radius:12px;
            font-size:1.05rem; font-weight:600; cursor:pointer; transition:all 0.3s ease; position:relative; overflow:hidden; margin-top:1rem;
            animation:slideInRight 0.6s ease-out 0.7s both;
        }
        @keyframes slideInRight{from{opacity:0;transform:translateX(30px);}to{opacity:1;transform:translateX(0);}}
        .submit-btn:hover{transform:translateY(-3px); box-shadow:0 10px 30px rgba(102,126,234,0.4);}
        .submit-btn:active{transform:translateY(-1px);}
        .submit-btn::before{content:''; position:absolute; top:0; left:-100%; width:100%; height:100%; background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent); transition:left 0.5s;}
        .submit-btn:hover::before{left:100%;}
        .submit-btn:disabled{opacity:0.7; cursor:not-allowed; transform:none; animation:none;}

        /* ====== Password Requirements ====== */
        .password-requirements{
            background: linear-gradient(135deg, rgba(102,126,234,0.1), rgba(118,75,162,0.1)); border-radius:12px; padding:1.2rem;
            margin-bottom:1.5rem; border-left:4px solid #667eea; animation:fadeIn 0.8s ease-out 0.6s both;
        }
        .password-requirements h6{color:#2c3e50;margin-bottom:0.5rem;font-size:0.9rem;font-weight:600;}
        .password-requirements ul{margin:0;padding-left:1.2rem;font-size:0.85rem;color:#6c757d;}
        .password-requirements li{margin-bottom:0.25rem; transition:all 0.3s ease;}
        .requirement-met{color:#28a745 !important; text-decoration:line-through; animation:checkmark 0.3s ease-out;}
        @keyframes checkmark{0%{transform:scale(1);}50%{transform:scale(1.1);}100%{transform:scale(1);}}

        /* ====== Back link ====== */
        .back-link{display:block;text-align:center;margin-top:2rem;color:#667eea;text-decoration:none;font-weight:500;transition:all 0.3s ease; animation: fadeIn 0.8s ease-out 0.8s both;}
        .back-link:hover{color:#764ba2; transform:translateX(-5px);}

        @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

        /* ====== Floating particles ====== */
        .particles{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:-1;}
        .particle{position:absolute;width:4px;height:4px;background:rgba(255,255,255,0.5);border-radius:50%; animation:float 6s ease-in-out infinite;}
        @keyframes float{0%,100%{transform:translateY(0px) rotate(0deg);opacity:1;}50%{transform:translateY(-100px) rotate(180deg);opacity:0.5;}}

        /* ====== Success animation ====== */
        @keyframes successPulse{0%{transform:scale(1); box-shadow:0 0 0 0 rgba(40,167,69,0.7);}70%{transform:scale(1.05); box-shadow:0 0 0 10px rgba(40,167,69,0);}100%{transform:scale(1); box-shadow:0 0 0 0 rgba(40,167,69,0);}}
        .success-btn{background:linear-gradient(135deg,#28a745,#20c997)!important; animation:successPulse 2s infinite;}

        /* ====== Responsive ====== */
        @media(max-width:992px){.reset-container{max-width:450px; padding:2.5rem;}}
        @media(max-width:768px){body{padding:1rem;}.reset-container{padding:2rem; max-width:400px;}.reset-title{font-size:1.6rem;}.reset-icon{width:60px;height:60px;font-size:1.5rem;}}
        @media(max-width:480px){body{padding:0.5rem;}.reset-container{padding:1.5rem;border-radius:15px;}.reset-title{font-size:1.4rem;}.form-input{padding:0.875rem 2.5rem 0.875rem 1rem;}.submit-btn{padding:0.875rem;font-size:1rem;}}
        @media(min-width:1200px){.reset-container{max-width:550px;padding:3.5rem;}.reset-title{font-size:2.2rem;}}
    </style>
</head>
<body>
    <!-- Floating particles -->
    <div class="particles">
        <div class="particle" style="left:10%; animation-delay:0s;"></div>
        <div class="particle" style="left:20%; animation-delay:1s;"></div>
        <div class="particle" style="left:30%; animation-delay:2s;"></div>
        <div class="particle" style="left:40%; animation-delay:3s;"></div>
        <div class="particle" style="left:50%; animation-delay:4s;"></div>
        <div class="particle" style="left:60%; animation-delay:5s;"></div>
        <div class="particle" style="left:70%; animation-delay:0.5s;"></div>
        <div class="particle" style="left:80%; animation-delay:1.5s;"></div>
        <div class="particle" style="left:90%; animation-delay:2.5s;"></div>
    </div>

    <div class="reset-container">
        <div class="icon-container">
            <div class="reset-icon">🔄</div>
        </div>

        <h2 class="reset-title">Reset Your Password</h2>
        <p class="reset-subtitle">Create a new secure password for your AlumConnect account.</p>

        <div class="password-requirements">
            <h6>Password Requirements:</h6>
            <ul>
                <li id="req-length">At least 8 characters long</li>
                <li id="req-case">Include uppercase and lowercase letters</li>
                <li id="req-number">Include at least one number</li>
                <li id="req-special">Include at least one special character</li>
            </ul>
        </div>

        <form action="/auth/reset/<%= token %>" method="POST">
            <div class="form-group">
                <div class="password-input-wrapper">
                    <input type="password" id="newpass" name="newpass" placeholder="New Password" class="form-input" required minlength="8" autocomplete="new-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('newpass')">👁️</button>
                </div>
            </div>
            <div class="form-group">
                <div class="password-input-wrapper">
                    <input type="password" id="confirmpass" name="confirmpass" placeholder="Confirm Password" class="form-input" required minlength="8" autocomplete="new-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('confirmpass')">👁️</button>
                </div>
            </div>
            <button type="submit" class="submit-btn" id="resetBtn">Reset Password</button>
        </form>

        <a href="/login" class="back-link">← Back to Login</a>
    </div>

    <script>
        // Toggle password visibility
        function togglePassword(id){
            const input = document.getElementById(id);
            const btn = input.nextElementSibling;
            if(input.type==='password'){input.type='text'; btn.textContent='🙈';}
            else{input.type='password'; btn.textContent='👁️';}
        }

        // Password strength validation
        document.getElementById('newpass').addEventListener('input', function(){
            const p=this.value;
            document.getElementById('req-length').classList.toggle('requirement-met',p.length>=8);
            document.getElementById('req-case').classList.toggle('requirement-met', /[a-z]/.test(p) && /[A-Z]/.test(p));
            document.getElementById('req-number').classList.toggle('requirement-met', /\d/.test(p));
            document.getElementById('req-special').classList.toggle('requirement-met', /[!@#$%^&*(),.?":{}|<>]/.test(p));
        });

        // Form submission
        document.querySelector('form').addEventListener('submit', function(e){
            const newPass = document.getElementById('newpass').value;
            const confirmPass = document.getElementById('confirmpass').value;
            const btn = document.getElementById('resetBtn');

            if(newPass!==confirmPass){ e.preventDefault(); alert('Passwords do not match!'); return; }

            btn.classList.add('success-btn');
            btn.disabled=true; btn.textContent='Resetting Password...';
        });

        // Floating particles
        function createParticle(){
            const particle=document.createElement('div'); particle.className='particle';
            particle.style.left=Math.random()*100+'%';
            particle.style.animationDelay=Math.random()*6+'s';
            particle.style.animationDuration=(Math.random()*3+3)+'s';
            document.querySelector('.particles').appendChild(particle);
            setTimeout(()=>particle.remove(),6000);
        }
        setInterval(createParticle,1000);

        document.getElementById('newpass').focus();
    </script>
</body>
</html>
